<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Refuel Assist v6.2 SAFE</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2c3e50">
    <link rel="apple-touch-icon" href="icon.png">

    <style>
        /* Buraya mevcut CSS kodlarÄ±nÄ±z (v2 safe) gelecek, hiÃ§bir deÄŸiÅŸiklik yapÄ±lmadÄ± */
        
        /* v2.1: Sadece YÃ¼kle Banner'Ä± iÃ§in eklenen stil */
        #pwa-install-banner {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 10001;
            text-align: center;
            font-family: sans-serif;
            border: 1px solid #34495e;
        }
        #pwa-install-banner button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: bold;
            margin-top: 10px;
            cursor: pointer;
            width: 100%;
        }
    </style>
</head>
<body>

    <div id="pwa-install-banner">
        <div style="font-size: 14px; margin-bottom: 5px;">Refuel Assist'i Uygulama Olarak KullanÄ±n</div>
        <button id="pwa-install-btn">ðŸ“² TELEFONA YÃœKLE</button>
        <div id="pwa-close" style="font-size: 11px; margin-top: 8px; color: #bdc3c7; cursor: pointer;">Daha Sonra</div>
    </div>

    <script>
        /* Buraya mevcut hesaplama ve kapak sayfasÄ± JS kodlarÄ±nÄ±z gelecek */
        
        // v2.1: PWA YÃ¼kleme MantÄ±ÄŸÄ±
        let deferredPrompt;
        const banner = document.getElementById('pwa-install-banner');
        const installBtn = document.getElementById('pwa-install-btn');
        const closeBtn = document.getElementById('pwa-close');

        // Service Worker KaydÄ±
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(() => console.log("v2.1: SW Registered"))
                    .catch(err => console.log("SW Error:", err));
            });
        }

        // YÃ¼kleme istemini yakala
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // KullanÄ±cÄ±ya yÃ¼kleme banner'Ä±nÄ± gÃ¶ster
            banner.style.display = 'block';
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`v2.1 User choice: ${outcome}`);
                deferredPrompt = null;
                banner.style.display = 'none';
            }
        });

        closeBtn.addEventListener('click', () => {
            banner.style.display = 'none';
        });

        window.addEventListener('appinstalled', () => {
            banner.style.display = 'none';
            console.log('v2.1: App Installed Successfully');
        });
    </script>
</body>
</html>
